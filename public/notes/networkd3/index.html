<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.37.1" />
  <meta name="author" content="VP Nagraj">

  
  
  
  
    
      
    
  
  <meta name="description" content="I’ve been working on a project that has a network analysis component, and am finally getting my head around how I can visualize the data. The package I’ve been using is networkD3, not to be confused with d3Network … same author but the former is now the actively developed version, and makes it easier to integrate the plots with something like Shiny.
The vignette is encouraging but kind of opaque, especially in terms of data preparation.">

  
  <link rel="alternate" hreflang="en-us" href="/notes/networkd3/">

  


  

  
  
  <meta name="theme-color" content="#0095eb">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="VP Nagraj">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="VP Nagraj">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/notes/networkd3/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@vpnagraj">
  <meta property="twitter:creator" content="@vpnagraj">
  
  <meta property="og:site_name" content="VP Nagraj">
  <meta property="og:url" content="/notes/networkd3/">
  <meta property="og:title" content="networkD3 | VP Nagraj">
  <meta property="og:description" content="I’ve been working on a project that has a network analysis component, and am finally getting my head around how I can visualize the data. The package I’ve been using is networkD3, not to be confused with d3Network … same author but the former is now the actively developed version, and makes it easier to integrate the plots with something like Shiny.
The vignette is encouraging but kind of opaque, especially in terms of data preparation.">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2016-01-06T13:18:39-05:00">
  
  <meta property="article:modified_time" content="2016-01-06T13:18:39-05:00">
  

  
  
  <meta name="google-site-verification" content="ppzo6np2j0dwXjWa2KEyLd5as2Xd76FoUhT1cXtCbW4" />

  <title>networkD3 | VP Nagraj</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">VP Nagraj</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        

        <li class="nav-item">
          <a href="/">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/about/bio">
            
            <span>About</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/notes">
            
            <span>Notes</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/publication">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">networkD3</h1>

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2016-01-06 13:18:39 -0500 EST" itemprop="datePublished dateModified">
      Jan 6, 2016
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="VP Nagraj">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    2 min read
  </span>
  

  
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/notes">notes</a
    >
    
  </span>
  
  

</div>

    <div class="article-style" itemprop="articleBody">
      <p>I’ve been working on a project that has a network analysis component, and am finally getting my head around how I can visualize the data. The package I’ve been using is <a href="https://cran.r-project.org/web/packages/networkD3/index.html">networkD3</a>, not to be confused with <a href="https://cran.r-project.org/web/packages/d3Network/index.html">d3Network</a> … same author but the former is now the actively developed version, and makes it easier to integrate the plots with something like Shiny.</p>
<p>The <a href="https://christophergandrud.github.io/networkD3/">vignette</a> is encouraging but kind of opaque, especially in terms of data preparation. With that said, it’s not too hard to wrangle your data frame into something that looks like the built in <em>Les Miserables</em> dataset.</p>
<p><code>simpleNetwork()</code> takes a data frame, as well as “Source” and “Target” column specifications to create the node-link relationships. What’s worth noting here is that each row represents a relationship. So to fully visualize a network you need a “long” data frame that walks through every combination or connection.</p>
<p>The code below creates the plot above. First it reads in a dataset that contains the <a href="https://github.com/MuseumofModernArt/collection">Museum of Modern Art (MOMA) collection database</a>. For legibility, the data is filtered by the year 1945, and does not include “various” artist designations. Because this is data frame has a “long” format (i.e. it repeats artist name if he or she has been collected by multiple departments) you can use pass it straight into simple network plot. The “source” in this case will be the artist and the “target” will be the department, and all of which will be nodes that are visualized with a link if they appear in the same row.</p>
<pre class="r"><code>library(networkD3)
library(dplyr)
library(readr)
library(lubridate)

# https://github.com/MuseumofModernArt/collection

moma &lt;- read_csv(&quot;https://media.githubusercontent.com/media/MuseumofModernArt/collection/master/Artworks.csv&quot;)

moma$YearAcquired &lt;- year(moma$DateAcquired)

moma1945 &lt;-
    moma %&gt;%
    # filter a year
    filter(YearAcquired == 1945) %&gt;%
    # get rid of &#39;various&#39; artist pieces
    filter(!grepl(&quot;Various&quot;, Artist)) %&gt;%
    select(Artist, Department)

# clean up workspace
rm(moma)

simpleNetwork(moma1945, 
              Source = &quot;Artist&quot;, 
              Target = &quot;Department&quot;,  
              nodeColour = &quot;firebrick&quot;,
              charge = -75,
              opacity = .5, 
              zoom = TRUE)</code></pre>
<p>Here’s <a href="https://github.com/vpnagraj/moma">code</a> for a Shiny app that creates visualizations very similar to the one above.</p>

    </div>

    


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/network-analysis">network analysis</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/r">R</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/d3">D3</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/javascript">JavaScript</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/shiny">Shiny</a>
  
</div>




    
    

    

    


  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

